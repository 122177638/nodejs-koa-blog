webpackJsonp([1],{"0klK":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("Xxa5"),n=a.n(r),o=a("exGp"),i=a.n(o),l=a("Dd8w"),c=a.n(l),s=a("NYxO"),u=a("J68u"),d=a("dVH7"),p={components:{UploadImages:u.a,mavonEditerUpload:d.a},computed:c()({},Object(s.d)({categoryList:function(t){return t.category.categoryList},uploadTokenData:function(t){return t.uploadToken.uploadTokenData}})),data:function(){return{upload:null,article:{title:"",author:"梁凤波",categoryId:"",tag:"",cover:"",introduction:"",content:""},ruleValidate:{title:[{required:!0,message:"The name cannot be empty",trigger:"blur"}],author:[{required:!0,message:"Author cannot be empty",trigger:"blur"}],categoryId:[{required:!0,message:"Please select the category",trigger:"change"}],tag:[{required:!0,message:"Please select the category",trigger:"change"}],cover:[{required:!0,message:"cover cannot be empty",trigger:"blur"}],introduction:[{required:!0,message:"Introduce cannot be empty",trigger:"blur"}],content:[{required:!0,message:"Please enter a personal introduction",trigger:"blur"},{type:"string",min:20,message:"Introduce no less than 20 words",trigger:"blur"}]}}},created:function(){this.getCategory()},methods:c()({},Object(s.b)({createArticle:"article/createArticle",getCategoryList:"category/getCategoryList"}),{getCategory:function(){var t=this;return i()(n.a.mark(function e(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.getCategoryList();case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}},e,t,[[0,5]])}))()},completeUpload:function(t){this.upload=t,this.article.cover=t.url},handleEditor:function(t){this.article.content=t},handleSubmit:function(t){var e,a=this;this.$refs[t].validate((e=i()(n.a.mark(function t(e){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=14;break}return t.prev=1,t.next=4,a.createArticle(a.article);case 4:a.$Message.success("创建文章成功"),a.article={title:"",author:"梁凤波",categoryId:"",tag:"",cover:"",introduction:"",content:""},setTimeout(function(){window.location.href="/article/list"},2e3),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),a.$Message.error("创建文章失败");case 12:t.next=15;break;case 14:a.$Message.error("Fail!");case 15:case"end":return t.stop()}},t,a,[[1,9]])})),function(t){return e.apply(this,arguments)}))},handleReset:function(t){this.$refs[t].resetFields()}})},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Form",{ref:"article",attrs:{model:t.article,rules:t.ruleValidate,"label-width":80}},[a("FormItem",{attrs:{label:"文章标题",prop:"title"}},[a("Input",{attrs:{placeholder:"title"},model:{value:t.article.title,callback:function(e){t.$set(t.article,"title",e)},expression:"article.title"}})],1),t._v(" "),a("FormItem",{attrs:{label:"文章作者",prop:"author"}},[a("Input",{attrs:{placeholder:"author"},model:{value:t.article.author,callback:function(e){t.$set(t.article,"author",e)},expression:"article.author"}})],1),t._v(" "),a("FormItem",{attrs:{label:"文章分类",prop:"category"}},[t.categoryList.length>0?a("Select",{staticStyle:{position:"relative","z-index":"9999"},attrs:{placeholder:"Select category"},model:{value:t.article.categoryId,callback:function(e){t.$set(t.article,"categoryId",e)},expression:"article.categoryId"}},t._l(t.categoryList,function(e,r){return a("Option",{key:r,attrs:{value:e.id}},[t._v("\n        "+t._s(e.name)+"\n      ")])})):t._e()],1),t._v(" "),a("FormItem",{attrs:{label:"文章标签",prop:"introduce"}},[a("Input",{attrs:{placeholder:"tag"},model:{value:t.article.tag,callback:function(e){t.$set(t.article,"tag",e)},expression:"article.tag"}})],1),t._v(" "),a("FormItem",{attrs:{label:"文章图片",prop:"banner"}},[a("upload-images",{on:{completeUpload:t.completeUpload}}),t._v(" "),t.upload?a("div",[a("img",{attrs:{src:t.upload.url,alt:"img"}})]):t._e()],1),t._v(" "),a("FormItem",{attrs:{label:"文章简介",prop:"introduce"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"introduce"},model:{value:t.article.introduction,callback:function(e){t.$set(t.article,"introduction",e)},expression:"article.introduction"}})],1),t._v(" "),t.uploadTokenData?a("FormItem",{attrs:{label:"文章内容",prop:"content"}},[a("mavon-editer-upload",{attrs:{data:t.article.content},on:{handleEditor:t.handleEditor}})],1):t._e(),t._v(" "),a("FormItem",[a("Button",{on:{click:function(e){t.handleReset("article")}}},[t._v("重置")]),t._v(" "),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary"},on:{click:function(e){t.handleSubmit("article")}}},[t._v("创建")])],1)],1)},staticRenderFns:[]};var m=a("VU/8")(p,g,!1,function(t){a("4Gej")},"data-v-5c7f0cf6",null);e.default=m.exports},"4Gej":function(t,e){},KtNw:function(t,e){},dVH7:function(t,e,a){"use strict";var r=a("Dd8w"),n=a.n(r),o=a("NYxO"),i={props:["data"],data:function(){return{value:"",url:null,pos:null,file:null,loadingStatus:!1}},computed:n()({},Object(o.d)({uploadTokenData:function(t){return t.uploadToken.uploadTokenData}})),created:function(){null!=this.data&&(this.value=this.data)},watch:{data:function(){null!=this.data&&(this.value=this.data)}},methods:{editorChange:function(t){this.$emit("handleEditor",this.value)},imgAdd:function(t,e){this.pos=t,this.$refs.file.post(e)},handleAvatarSuccess:function(t,e){var a="http://images.boblog.com/"+t.key;this.$refs.md.$img2Url(this.pos,a)},handleAvatarError:function(){delete this.img_file[this.pos]}}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("mavon-editor",{ref:"md",attrs:{ishljs:!0},on:{change:t.editorChange,imgAdd:t.imgAdd},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),t._v(" "),a("Upload",{ref:"file",staticClass:"avatar-uploader",staticStyle:{display:"none"},attrs:{action:"http://up-z2.qiniu.com","show-upload-list":!1,data:{token:t.uploadTokenData.token},"thumbnail-mode":!0,"on-success":t.handleAvatarSuccess,"on-error":t.handleAvatarError}})],1)},staticRenderFns:[]};var c=a("VU/8")(i,l,!1,function(t){a("KtNw")},null,null);e.a=c.exports}});
//# sourceMappingURL=1.bbd12e57525389bbcafd.js.map